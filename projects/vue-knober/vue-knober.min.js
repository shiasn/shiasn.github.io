!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("vue-knober",[],e):"object"==typeof exports?exports["vue-knober"]=e():t["vue-knober"]=e()}(window,function(){return function(t){var e={};function i(n){if(e[n])return e[n].exports;var r=e[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}return i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(n,r,function(e){return t[e]}.bind(null,r));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/dist/",i(i.s=2)}([function(t,e,i){(function(e){var i="Expected a function",n=NaN,r="[object Symbol]",o=/^\s+|\s+$/g,a=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,l=/^0o[0-7]+$/i,u=parseInt,c="object"==typeof e&&e&&e.Object===Object&&e,f="object"==typeof self&&self&&self.Object===Object&&self,h=c||f||Function("return this")(),d=Object.prototype.toString,p=Math.max,b=Math.min,m=function(){return h.Date.now()};function v(t,e,n){var r,o,a,s,l,u,c=0,f=!1,h=!1,d=!0;if("function"!=typeof t)throw new TypeError(i);function v(e){var i=r,n=o;return r=o=void 0,c=e,s=t.apply(n,i)}function w(t){var i=t-u;return void 0===u||i>=e||i<0||h&&t-c>=a}function S(){var t=m();if(w(t))return z(t);l=setTimeout(S,function(t){var i=e-(t-u);return h?b(i,a-(t-c)):i}(t))}function z(t){return l=void 0,d&&r?v(t):(r=o=void 0,s)}function C(){var t=m(),i=w(t);if(r=arguments,o=this,u=t,i){if(void 0===l)return function(t){return c=t,l=setTimeout(S,e),f?v(t):s}(u);if(h)return l=setTimeout(S,e),v(u)}return void 0===l&&(l=setTimeout(S,e)),s}return e=y(e)||0,g(n)&&(f=!!n.leading,a=(h="maxWait"in n)?p(y(n.maxWait)||0,e):a,d="trailing"in n?!!n.trailing:d),C.cancel=function(){void 0!==l&&clearTimeout(l),c=0,r=u=o=l=void 0},C.flush=function(){return void 0===l?s:z(m())},C}function g(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function y(t){if("number"==typeof t)return t;if(function(t){return"symbol"==typeof t||function(t){return!!t&&"object"==typeof t}(t)&&d.call(t)==r}(t))return n;if(g(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=g(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(o,"");var i=s.test(t);return i||l.test(t)?u(t.slice(2),i?2:8):a.test(t)?n:+t}t.exports=function(t,e,n){var r=!0,o=!0;if("function"!=typeof t)throw new TypeError(i);return g(n)&&(r="leading"in n?!!n.leading:r,o="trailing"in n?!!n.trailing:o),v(t,e,{leading:r,maxWait:e,trailing:o})}}).call(this,i(1))},function(t,e){var i;i=function(){return this}();try{i=i||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(i=window)}t.exports=i},function(t,e,i){"use strict";i.r(e);var n=i(0);var r=function(t,e,i,n,r,o,a,s){var l,u="function"==typeof t?t.options:t;if(e&&(u.render=e,u.staticRenderFns=i,u._compiled=!0),n&&(u.functional=!0),o&&(u._scopeId="data-v-"+o),a?(l=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),r&&r.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(a)},u._ssrRegister=l):r&&(l=s?function(){r.call(this,this.$root.$options.shadowRoot)}:r),l)if(u.functional){u._injectStyles=l;var c=u.render;u.render=function(t,e){return l.call(e),c(t,e)}}else{var f=u.beforeCreate;u.beforeCreate=f?[].concat(f,l):[l]}return{exports:t,options:u}}({name:"vue-knober",data:function(){return{margin:0,chassisSize:0,knobSize:0,ctx:null,initialAngle:-30,currentValue:this.value}},props:{size:{type:[String,Number],default:250},value:{type:[String,Number],default:0},min:{type:[String,Number],default:0},max:{type:[String,Number],default:255},primaryColor:{type:String,default:"#79bd9a"},diffColor:{type:String,default:"#cff0da"},quenchColor:{type:String,default:"#eee"},backgroundColor:{type:String,default:"#fff"},shadowColor:{type:String,default:"#aaa"},fontColor:{tyle:String,default:"#999"}},computed:{range(){return this.max-this.min}},created(){const t=Number(this.size);this.margin=.1*t,this.chassisSize=t/2-this.margin,this.knobSize=.4*this.chassisSize},methods:{calculateRenderParams(t,e){const i=this.size,n=t-i/2,r=e-i/2,o=Math.sqrt(Math.pow(Math.abs(n),2)+Math.pow(Math.abs(r),2));let a=180*Math.atan2(r,n)/Math.PI-180;return a<-180&&(a=Math.abs(a+360)),{r:o,angle:a,coorX:n,coorY:r}},move:i.n(n)()(function(t){const{angle:e,r:i,coorX:n,coorY:r}=t;e<-180&&(e=Math.abs(e+360)),i<this.chassisSize?this.draw(e,i,n,r):this.draw()},40,{trailing:!1}),calculateValue(t){const e=this.range/240;let i;return t>0?i=e*(t+30):t>=-30?i=e*(30+t):t<=-150&&(i=e*(210+t+180)),(i=Number(i&&i.toFixed(0)))+Number(this.min)},press(t){const{angle:e,r:i,coorX:n,coorY:r}=t,o=this.calculateValue(e);i>this.chassisSize||(i<=this.knobSize?this.currentValue>Number(this.min)?this.currentValue=this.min:this.currentValue=this.max:o&&(this.initialAngle=e,this.currentValue=Number(o)))},drawKnob(t,e,i,n){const r=this,o=r.knobSize,a=this.ctx;void 0===t||t<-30&&t>-150?t=this.initialAngle:e>r.knobSize&&e>=r.knobSize&&t<0&&(t<=-30&&t>=-90?t=-30:t>-150&&t<-90&&(t=-150)),function(){const t=e<r.knobSize?.2*o:.5*o,i=e<r.knobSize?.05*o:.1*o;a.save(),a.translate(r.size/2,r.size/2),a.beginPath(),a.arc(0,0,o,0,2*Math.PI,!0),a.shadowBlur=t,a.shadowColor=r.shadowColor,a.shadowOffsetX=i,a.shadowOffsetY=i,a.fillStyle=r.backgroundColor,a.fill(),a.closePath(),a.restore()}(),(!e||e>this.knobSize)&&(a.save(),a.translate(r.size/2,r.size/2),a.rotate(t*Math.PI/180),a.rotate(0),a.beginPath(),a.moveTo(.6*-o,0),a.lineTo(.9*-o,0),a.lineWidth=.015*r.size,a.strokeStyle=r.primaryColor,a.stroke(),a.closePath(),a.restore()),function(){const t=.3*r.knobSize;let i=r.quenchColor;e<r.knobSize&&(i=r.currentValue>0?"#fe4365":r.primaryColor);a.save(),a.translate(r.size/2,r.size/2),a.rotate(-125*Math.PI/180),a.beginPath(),a.arc(0,0,.3*r.knobSize,0,2*Math.PI-5,!0),a.lineWidth=.2*t,a.strokeStyle=i,a.shadowBlur=.3*t,a.shadowColor=i,a.lineCap="round",a.stroke(),a.restore(),a.save(),a.translate(r.size/2,r.size/2),a.beginPath(),a.moveTo(0,0),a.lineTo(0,1.2*-t),a.lineWidth=.2*t,a.strokeStyle=i,a.shadowBlur=.3*t,a.shadowColor=i,a.lineCap="round",a.stroke(),a.closePath(),a.restore()}()},drawDashboard(t,e,i,n){const r=this,o=r.ctx,a=r.size,s=r.chassisSize;(t+=30)<0&&(t=360+t),o.save(),o.translate(a/2,a/2),o.beginPath(),o.arc(0,0,s,0,2*Math.PI,!0),o.shadowBlur=.16*s,o.shadowOffsetX=.03*s,o.shadowOffsetY=.03*s,o.shadowColor=r.shadowColor,o.fillStyle=r.backgroundColor,o.fill(),o.closePath(),o.restore(),function(){o.save(),o.translate(a/2,a/2),o.rotate(-30*Math.PI/180);let i=0;for(;i<=30;){const n=-r.knobSize-.1*s,a=i%3==0?.9*-s:.75*-s,l=i%3==0?2:1.5,u=8*i;let c=r.quenchColor,f="#fff";const h=(t,e)=>()=>{c=t,f=e},d=h(r.diffColor,r.diffColor),p=h(r.primaryColor,r.primaryColor);if(t)if(e>r.knobSize){t>240?u<=r.initialAngle+30&&r.currentValue>0&&p():r.currentValue<=r.min?u<r.initialAngle+30&&u<t?p():(u<=r.initialAngle+30||u<=t)&&d():u<=r.initialAngle+30&&u<=t?p():(u<=r.initialAngle+30||u<=t)&&d()}else u<=r.initialAngle+30&&0!==r.currentValue&&d();else r.currentValue<=r.min?u<r.initialAngle+30&&p():u<=r.initialAngle+30&&p();o.rotate(0===i?0:8*Math.PI/180),o.beginPath(),o.moveTo(n,0),o.lineTo(a,0),o.lineWidth=l,o.shadowBlur=.05*s,o.shadowColor=f,o.shadowOffsetX=0,o.shadowOffsetY=0,o.strokeStyle=c,o.stroke(),o.closePath(),i++}o.restore()}()},drawlabel(t,e,i,n){const r=this.ctx;let o=this.currentValue;if(t&&t<=240&&e>this.knobSize){const e=this.calculateValue(t);e&&(o=e)}r.save(),r.translate(this.size/2,this.size/2+.8*this.chassisSize),r.fillStyle=this.fontColor,r.textAlign="center",r.font=`${.3*this.chassisSize}px Arial`,r.fillText(o,0,0),r.restore()},draw(t,e,i,n){this.ctx.clearRect(0,0,this.size,this.size),this.drawDashboard(t,e,i,n),this.drawKnob(t,e,i,n),this.drawlabel(t,e,i,n)},watchCurrentValueHandler(t){let e=240/this.range*(t-this.min)-30;e>180&&(e-=360),this.initialAngle=e,this.draw()},mobilePosition(t){const{pageX:e,pageY:i}=t.changedTouches[0],{x:n,y:r}=this.$el.getBoundingClientRect();return[e-(window.scrollX+n),i-(window.scrollY+r)]}},mounted(){this.ctx=this.$el.getContext("2d"),this.$el.addEventListener("mousemove",t=>this.move(this.calculateRenderParams(t.offsetX,t.offsetY)),!1),this.$el.addEventListener("mouseout",()=>this.draw(),!1),this.$el.addEventListener("click",t=>this.press(this.calculateRenderParams(t.offsetX,t.offsetY)),!1),this.$el.addEventListener("touchmove",t=>{t.preventDefault(),this.move(this.calculateRenderParams(...this.mobilePosition(t)))},!1),this.$el.addEventListener("touchend",t=>{t.preventDefault(),this.press(this.calculateRenderParams(...this.mobilePosition(t)))}),this.$watch("currentValue",t=>{this.$emit("input",t);const e=240/this.range*(t-this.min)-30;this.initialAngle=e,this.draw()},{immediate:!0})}},function(){var t=this.$createElement;return(this._self._c||t)("canvas",{ref:"canvas",attrs:{width:Number(this.size),height:Number(this.size)}})},[],!1,null,null,null);r.options.__file="knober.vue";var o=r.exports;"undefined"!=typeof window&&window.Vue&&window.Vue.component("vue-knober",o);e.default=o}])});
//# sourceMappingURL=vue-knober.min.js.map