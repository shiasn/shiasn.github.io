!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("vue-knober",[],t):"object"==typeof exports?exports["vue-knober"]=t():e["vue-knober"]=t()}(window,function(){return function(e){var t={};function i(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}return i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/dist/",i(i.s=2)}([function(e,t,i){(function(t){var i="Expected a function",n=NaN,r="[object Symbol]",o=/^\s+|\s+$/g,a=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,l=/^0o[0-7]+$/i,u=parseInt,c="object"==typeof t&&t&&t.Object===Object&&t,f="object"==typeof self&&self&&self.Object===Object&&self,h=c||f||Function("return this")(),d=Object.prototype.toString,p=Math.max,b=Math.min,m=function(){return h.Date.now()};function v(e,t,n){var r,o,a,s,l,u,c=0,f=!1,h=!1,d=!0;if("function"!=typeof e)throw new TypeError(i);function v(t){var i=r,n=o;return r=o=void 0,c=t,s=e.apply(n,i)}function y(e){var i=e-u;return void 0===u||i>=t||i<0||h&&e-c>=a}function S(){var e=m();if(y(e))return z(e);l=setTimeout(S,function(e){var i=t-(e-u);return h?b(i,a-(e-c)):i}(e))}function z(e){return l=void 0,d&&r?v(e):(r=o=void 0,s)}function x(){var e=m(),i=y(e);if(r=arguments,o=this,u=e,i){if(void 0===l)return function(e){return c=e,l=setTimeout(S,t),f?v(e):s}(u);if(h)return l=setTimeout(S,t),v(u)}return void 0===l&&(l=setTimeout(S,t)),s}return t=w(t)||0,g(n)&&(f=!!n.leading,a=(h="maxWait"in n)?p(w(n.maxWait)||0,t):a,d="trailing"in n?!!n.trailing:d),x.cancel=function(){void 0!==l&&clearTimeout(l),c=0,r=u=o=l=void 0},x.flush=function(){return void 0===l?s:z(m())},x}function g(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function w(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&d.call(e)==r}(e))return n;if(g(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=g(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(o,"");var i=s.test(e);return i||l.test(e)?u(e.slice(2),i?2:8):a.test(e)?n:+e}e.exports=function(e,t,n){var r=!0,o=!0;if("function"!=typeof e)throw new TypeError(i);return g(n)&&(r="leading"in n?!!n.leading:r,o="trailing"in n?!!n.trailing:o),v(e,t,{leading:r,maxWait:t,trailing:o})}}).call(this,i(1))},function(e,t){var i;i=function(){return this}();try{i=i||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(i=window)}e.exports=i},function(e,t,i){"use strict";i.r(t);var n=i(0);var r=function(e,t,i,n,r,o,a,s){var l,u="function"==typeof e?e.options:e;if(t&&(u.render=t,u.staticRenderFns=i,u._compiled=!0),n&&(u.functional=!0),o&&(u._scopeId="data-v-"+o),a?(l=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),r&&r.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(a)},u._ssrRegister=l):r&&(l=s?function(){r.call(this,this.$root.$options.shadowRoot)}:r),l)if(u.functional){u._injectStyles=l;var c=u.render;u.render=function(e,t){return l.call(t),c(e,t)}}else{var f=u.beforeCreate;u.beforeCreate=f?[].concat(f,l):[l]}return{exports:e,options:u}}({name:"vue-knober",data:function(){return{margin:0,chassisSize:0,knobSize:0,ctx:null,initialAngle:-30,currentValue:this.value}},props:{size:{type:[String,Number],default:250},value:{type:[String,Number],default:0},min:{type:[String,Number],default:0},max:{type:[String,Number],default:255},primaryColor:{type:String,default:"#79bd9a"},diffColor:{type:String,default:"#cff0da"},quenchColor:{type:String,default:"#eee"}},computed:{range(){return this.max-this.min}},created(){const e=Number(this.size);this.margin=.1*e,this.chassisSize=e/2-this.margin,this.knobSize=.4*this.chassisSize},methods:{calculateRenderParams(e,t){const i=this.size,n=e-i/2,r=t-i/2,o=Math.sqrt(Math.pow(Math.abs(n),2)+Math.pow(Math.abs(r),2));let a=180*Math.atan2(r,n)/Math.PI-180;return a<-180&&(a=Math.abs(a+360)),{r:o,angle:a,coorX:n,coorY:r}},move:i.n(n)()(function(e){const{angle:t,r:i,coorX:n,coorY:r}=e;t<-180&&(t=Math.abs(t+360)),i<this.chassisSize?this.draw(t,i,n,r):this.draw()},40,{trailing:!1}),calculateValue(e){const t=this.range/240;let i;return e>0?i=t*(e+30):e>=-30?i=t*(30+e):e<=-150&&(i=t*(210+e+180)),(i=Number(i&&i.toFixed(0)))+Number(this.min)},press(e){const{angle:t,r:i,coorX:n,coorY:r}=e,o=this.calculateValue(t);i>this.chassisSize||(i<=this.knobSize?this.currentValue>Number(this.min)?this.currentValue=this.min:this.currentValue=this.max:o&&(this.initialAngle=t,this.currentValue=Number(o)))},drawKnob(e,t,i,n){const r=this,o=r.knobSize,a=this.ctx;void 0===e||e<-30&&e>-150?e=this.initialAngle:t>r.knobSize&&t>=r.knobSize&&e<0&&(e<=-30&&e>=-90?e=-30:e>-150&&e<-90&&(e=-150)),function(){const e=t<r.knobSize?.2*o:.5*o,i=t<r.knobSize?.05*o:.1*o;a.save(),a.translate(r.size/2,r.size/2),a.beginPath(),a.arc(0,0,o,0,2*Math.PI,!0),a.shadowBlur=e,a.shadowColor="#aaa",a.shadowOffsetX=i,a.shadowOffsetY=i,a.fillStyle="#fff",a.fill(),a.closePath(),a.restore()}(),(!t||t>this.knobSize)&&(a.save(),a.translate(r.size/2,r.size/2),a.rotate(e*Math.PI/180),a.rotate(0),a.beginPath(),a.moveTo(.6*-o,0),a.lineTo(.9*-o,0),a.lineWidth=.015*r.size,a.strokeStyle=r.primaryColor,a.stroke(),a.closePath(),a.restore()),function(){const e=.3*r.knobSize;let i=r.quenchColor;t<r.knobSize&&(i=r.currentValue>0?"#fe4365":r.primaryColor);a.save(),a.translate(r.size/2,r.size/2),a.rotate(-125*Math.PI/180),a.beginPath(),a.arc(0,0,.3*r.knobSize,0,2*Math.PI-5,!0),a.lineWidth=.2*e,a.strokeStyle=i,a.shadowBlur=.3*e,a.shadowColor=i,a.lineCap="round",a.stroke(),a.restore(),a.save(),a.translate(r.size/2,r.size/2),a.beginPath(),a.moveTo(0,0),a.lineTo(0,1.2*-e),a.lineWidth=.2*e,a.strokeStyle=i,a.shadowBlur=.3*e,a.shadowColor=i,a.lineCap="round",a.stroke(),a.closePath(),a.restore()}()},drawDashboard(e,t,i,n){const r=this,o=r.ctx,a=r.size,s=r.chassisSize;(e+=30)<0&&(e=360+e),o.save(),o.translate(a/2,a/2),o.beginPath(),o.arc(0,0,s,0,2*Math.PI,!0),o.shadowBlur=.16*s,o.shadowOffsetX=.03*s,o.shadowOffsetY=.03*s,o.shadowColor="#ccc",o.fillStyle="#fff",o.fill(),o.closePath(),o.restore(),function(){o.save(),o.translate(a/2,a/2),o.rotate(-30*Math.PI/180);let i=0;for(;i<=30;){const n=-r.knobSize-.1*s,a=i%3==0?.9*-s:.75*-s,l=i%3==0?2:1.5,u=8*i;let c=r.quenchColor,f="#fff";const h=(e,t)=>()=>{c=e,f=t},d=h(r.diffColor,r.diffColor),p=h(r.primaryColor,r.primaryColor);if(e)if(t>r.knobSize){e>240?u<=r.initialAngle+30&&r.currentValue>0&&p():r.currentValue<=r.min?u<r.initialAngle+30&&u<e?p():(u<=r.initialAngle+30||u<=e)&&d():u<=r.initialAngle+30&&u<=e?p():(u<=r.initialAngle+30||u<=e)&&d()}else u<=r.initialAngle+30&&0!==r.currentValue&&d();else r.currentValue<=r.min?u<r.initialAngle+30&&p():u<=r.initialAngle+30&&p();o.rotate(0===i?0:8*Math.PI/180),o.beginPath(),o.moveTo(n,0),o.lineTo(a,0),o.lineWidth=l,o.shadowBlur=.05*s,o.shadowColor=f,o.shadowOffsetX=0,o.shadowOffsetY=0,o.strokeStyle=c,o.stroke(),o.closePath(),i++}o.restore()}()},drawlabel(e,t,i,n){const r=this.ctx;let o=this.currentValue;if(e&&e<=240&&t>this.knobSize){const t=this.calculateValue(e);t&&(o=t)}r.save(),r.translate(this.size/2,this.size/2+.8*this.chassisSize),r.fillStyle="#999",r.textAlign="center",r.font=`${.3*this.chassisSize}px Arial`,r.fillText(o,0,0),r.restore()},draw(e,t,i,n){this.ctx.clearRect(0,0,this.size,this.size),this.drawDashboard(e,t,i,n),this.drawKnob(e,t,i,n),this.drawlabel(e,t,i,n)},watchCurrentValueHandler(e){let t=240/this.range*(e-this.min)-30;t>180&&(t-=360),this.initialAngle=t,this.draw()}},mounted(){this.ctx=this.$el.getContext("2d"),this.$el.addEventListener("mousemove",e=>this.move(this.calculateRenderParams(e.offsetX,e.offsetY)),!1),this.$el.addEventListener("mouseout",()=>this.draw(),!1),this.$el.addEventListener("click",e=>this.press(this.calculateRenderParams(e.offsetX,e.offsetY)),!1),this.$el.addEventListener("touchmove",e=>{e.preventDefault();const{pageX:t,pageY:i}=e.changedTouches[0],{x:n,y:r}=this.$el.getBoundingClientRect();this.move(this.calculateRenderParams(t-(window.scrollX+n),i-(window.scrollY+r)))},!1),this.$el.addEventListener("touchend",e=>{e.preventDefault();const{pageX:t,pageY:i}=e.changedTouches[0],{x:n,y:r}=this.$el.getBoundingClientRect();this.press(this.calculateRenderParams(t-(window.scrollX+n),i-(window.scrollY+r)))}),this.$watch("currentValue",e=>{this.$emit("input",e);const t=240/this.range*(e-this.min)-30;this.initialAngle=t,this.draw()},{immediate:!0})}},function(){var e=this.$createElement;return(this._self._c||e)("canvas",{ref:"canvas",attrs:{width:Number(this.size),height:Number(this.size)}})},[],!1,null,null,null);r.options.__file="knober.vue";var o=r.exports;"undefined"!=typeof window&&window.Vue&&window.Vue.component("vue-knober",o);t.default=o}])});
//# sourceMappingURL=vue-knober.min.js.map